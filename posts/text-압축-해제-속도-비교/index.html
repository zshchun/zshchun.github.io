<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Text 압축 해제 속도 비교 | sh</title><meta name=keywords content="compression"><meta name=description content="목표 대용량 텍스트의 압축 크기와 해제 속도의 수용가능한 절충점 찾기 multithreading"><meta name=author content="Seunghwan Chun"><link rel=canonical href=https://zshchun.github.io/posts/text-%EC%95%95%EC%B6%95-%ED%95%B4%EC%A0%9C-%EC%86%8D%EB%8F%84-%EB%B9%84%EA%B5%90/><link crossorigin=anonymous href=/assets/css/stylesheet.0d2ee8bb1bc6a8196da0f4036d74cedc1fb80d74ab9f6160fc44670f9b85dd9c.css integrity="sha256-DS7ouxvGqBltoPQDbXTO3B+4DXSrn2Fg/ERnD5uF3Zw=" rel="preload stylesheet" as=style><link rel=icon href=https://zshchun.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://zshchun.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://zshchun.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://zshchun.github.io/apple-touch-icon.png><link rel=mask-icon href=https://zshchun.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-228892904-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"))</script><meta property="og:title" content="Text 압축 해제 속도 비교"><meta property="og:description" content="목표 대용량 텍스트의 압축 크기와 해제 속도의 수용가능한 절충점 찾기 multithreading"><meta property="og:type" content="article"><meta property="og:url" content="https://zshchun.github.io/posts/text-%EC%95%95%EC%B6%95-%ED%95%B4%EC%A0%9C-%EC%86%8D%EB%8F%84-%EB%B9%84%EA%B5%90/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-03-01T21:50:13+09:00"><meta property="article:modified_time" content="2022-03-01T21:50:13+09:00"><meta property="og:site_name" content="sh"><meta name=twitter:card content="summary"><meta name=twitter:title content="Text 압축 해제 속도 비교"><meta name=twitter:description content="목표 대용량 텍스트의 압축 크기와 해제 속도의 수용가능한 절충점 찾기 multithreading"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://zshchun.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Text 압축 해제 속도 비교","item":"https://zshchun.github.io/posts/text-%EC%95%95%EC%B6%95-%ED%95%B4%EC%A0%9C-%EC%86%8D%EB%8F%84-%EB%B9%84%EA%B5%90/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Text 압축 해제 속도 비교","name":"Text 압축 해제 속도 비교","description":"목표 대용량 텍스트의 압축 크기와 해제 속도의 수용가능한 절충점 찾기 multithreading","keywords":["compression"],"articleBody":"목표 대용량 텍스트의 압축 크기와 해제 속도의 수용가능한 절충점 찾기 multithreading 옵션과 압축 레벨을 이용하지 않고 기본 옵션으로 비교 압축 해제 속도만 측정 script 1#!/bin/bash 2testfile=test.txt 3declare -A ext_array=([Z]=compress [gz]=gzip [xz]=xz [lz]=lzip [bz2]=bzip2 [zst]=zstd [lzma]=lzma [lz4]=lz4) 4for ext in ${!ext_array[@]} 5do 6 prog=${ext_array[$ext]} 7 ls -sh $testfile.$ext 8 time $prog -dc $testfile.$ext \u003e /dev/null 9done samples (1-2GB) name size(MB) time(sec) name size(MB) time(sec) lz4 120 0.591 lz4 271 1.159 zstd 47 0.786 zstd 132 1.850 lzma 26 1.638 lzma 84 4.743 xz 26 2.473 gzip 152 4.820 gzip 67 2.694 xz 84 6.124 Lempel-Ziv 110 3.679 Lempel-Ziv 192 6.258 lzip 27 3.932 lzip 86 9.609 bzip2 42 7.724 bzip2 95 16.014 결론 속도는 lz4가 가장 빠르지만 압축률이 낮다.\n크기와 속도의 절충점으로 zstd나 lzma 정도가 대안이 된다.\nxz가 압축률이 가장 좋고 bzip2은 모든 면에서 이점이 없다.\n참조 Comparison of Compression Algorithms\n","wordCount":"231","inLanguage":"en","datePublished":"2022-03-01T21:50:13+09:00","dateModified":"2022-03-01T21:50:13+09:00","author":{"@type":"Person","name":"Seunghwan Chun"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://zshchun.github.io/posts/text-%EC%95%95%EC%B6%95-%ED%95%B4%EC%A0%9C-%EC%86%8D%EB%8F%84-%EB%B9%84%EA%B5%90/"},"publisher":{"@type":"Organization","name":"sh","logo":{"@type":"ImageObject","url":"https://zshchun.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://zshchun.github.io/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zshchun.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://zshchun.github.io/docs/ title=docs><span>docs</span></a></li><li><a href=https://zshchun.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://zshchun.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://zshchun.github.io/posts/>Posts</a></div><h1 class=post-title>Text 압축 해제 속도 비교</h1><div class=post-meta><span title='2022-03-01 21:50:13 +0900 KST'>2022/03/01</span>&nbsp;·&nbsp;231 words&nbsp;·&nbsp;Seunghwan Chun</div></header><div class=post-content><h1 id=목표>목표<a hidden class=anchor aria-hidden=true href=#목표>#</a></h1><ul><li>대용량 텍스트의 압축 크기와 해제 속도의 수용가능한 절충점 찾기</li><li>multithreading 옵션과 압축 레벨을 이용하지 않고 기본 옵션으로 비교</li><li>압축 해제 속도만 측정</li></ul><h1 id=script>script<a hidden class=anchor aria-hidden=true href=#script>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:2;-o-tab-size:2;tab-size:2><code class=language-sh data-lang=sh><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span><span style=color:#75715e></span>testfile<span style=color:#f92672>=</span>test.txt
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span>declare -A ext_array<span style=color:#f92672>=([</span>Z<span style=color:#f92672>]=</span>compress <span style=color:#f92672>[</span>gz<span style=color:#f92672>]=</span>gzip <span style=color:#f92672>[</span>xz<span style=color:#f92672>]=</span>xz <span style=color:#f92672>[</span>lz<span style=color:#f92672>]=</span>lzip <span style=color:#f92672>[</span>bz2<span style=color:#f92672>]=</span>bzip2 <span style=color:#f92672>[</span>zst<span style=color:#f92672>]=</span>zstd <span style=color:#f92672>[</span>lzma<span style=color:#f92672>]=</span>lzma <span style=color:#f92672>[</span>lz4<span style=color:#f92672>]=</span>lz4<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span><span style=color:#66d9ef>for</span> ext in <span style=color:#e6db74>${</span>!ext_array[@]<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5</span><span><span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6</span><span>        prog<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>ext_array[$ext]<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7</span><span>        ls -sh $testfile.$ext
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8</span><span>        time $prog -dc $testfile.$ext &gt; /dev/null
</span></span><span style=display:flex><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">9</span><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h1 id=samples-1-2gb>samples (1-2GB)<a hidden class=anchor aria-hidden=true href=#samples-1-2gb>#</a></h1><table><thead><tr><th style=text-align:center>name</th><th style=text-align:center>size(MB)</th><th>time(sec)</th><th style=text-align:center>name</th><th style=text-align:center>size(MB)</th><th>time(sec)</th></tr></thead><tbody><tr><td style=text-align:center>lz4</td><td style=text-align:center>120</td><td><strong>0.591</strong></td><td style=text-align:center>lz4</td><td style=text-align:center>271</td><td><strong>1.159</strong></td></tr><tr><td style=text-align:center>zstd</td><td style=text-align:center>47</td><td>0.786</td><td style=text-align:center>zstd</td><td style=text-align:center>132</td><td>1.850</td></tr><tr><td style=text-align:center>lzma</td><td style=text-align:center><strong>26</strong></td><td>1.638</td><td style=text-align:center>lzma</td><td style=text-align:center><strong>84</strong></td><td>4.743</td></tr><tr><td style=text-align:center>xz</td><td style=text-align:center><strong>26</strong></td><td>2.473</td><td style=text-align:center>gzip</td><td style=text-align:center>152</td><td>4.820</td></tr><tr><td style=text-align:center>gzip</td><td style=text-align:center>67</td><td>2.694</td><td style=text-align:center>xz</td><td style=text-align:center><strong>84</strong></td><td>6.124</td></tr><tr><td style=text-align:center>Lempel-Ziv</td><td style=text-align:center>110</td><td>3.679</td><td style=text-align:center>Lempel-Ziv</td><td style=text-align:center>192</td><td>6.258</td></tr><tr><td style=text-align:center>lzip</td><td style=text-align:center>27</td><td>3.932</td><td style=text-align:center>lzip</td><td style=text-align:center>86</td><td>9.609</td></tr><tr><td style=text-align:center>bzip2</td><td style=text-align:center>42</td><td>7.724</td><td style=text-align:center>bzip2</td><td style=text-align:center>95</td><td>16.014</td></tr></tbody></table><h1 id=결론>결론<a hidden class=anchor aria-hidden=true href=#결론>#</a></h1><p>속도는 lz4가 가장 빠르지만 압축률이 낮다.</p><p>크기와 속도의 절충점으로 zstd나 lzma 정도가 대안이 된다.</p><p>xz가 압축률이 가장 좋고 bzip2은 모든 면에서 이점이 없다.</p><h1 id=참조>참조<a hidden class=anchor aria-hidden=true href=#참조>#</a></h1><p><a href=https://linuxreviews.org/Comparison_of_Compression_Algorithms>Comparison of Compression Algorithms</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://zshchun.github.io/tags/compression/>compression</a></li></ul><nav class=paginav><a class=prev href=https://zshchun.github.io/posts/net%EC%9D%98-aes-hw-%EA%B0%80%EC%86%8D-%EC%A7%80%EC%9B%90/><span class=title>« Prev</span><br><span>NET의 AES HW 가속 지원</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://zshchun.github.io/>sh</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>